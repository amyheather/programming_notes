

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Target trial emulation &#8212; Birth outcomes  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'causal_concepts/7_target_trial';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overview" href="../causal_methods/summary.html" />
    <link rel="prev" title="Propensity scores" href="6_propensity_scores.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Programming notes</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../python/general.html">
                        Python
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../r/general.html">
                        R
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../programming_notes/git.html">
                        Git
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../simulation/simulation.html">
                        Simulation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="1_predict_vs_causal.html">
                        Causality
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../programming_notes/latex.html">
                        Other
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/amyheather/programming_notes/" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../python/general.html">
                        Python
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../r/general.html">
                        R
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../programming_notes/git.html">
                        Git
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../simulation/simulation.html">
                        Simulation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="1_predict_vs_causal.html">
                        Causality
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links-2">
                    More
                </button>
                <ul id="pst-nav-more-links-2" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../programming_notes/latex.html">
                        Other
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/amyheather/programming_notes/" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction and causal concepts</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="1_predict_vs_causal.html">Prediction v.s. causal inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_intro_to_causality.html">The three “languages” of causal inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_dags.html">Directed acyclic graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_assumptions.html">Assumptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_estimands.html">Causal estimands</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_propensity_scores.html">Propensity scores</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Target trial emulation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Methods</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/summary.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/a1_multivariable_regression.html">Multivariable regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/a2_stratification.html">Stratification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/a3_matching.html">Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/a4_iptw.html">Inverse probability of treatment weighting (IPTW) with baseline covariates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/b1_marginal_structural_models.html">Marginal structural models (MSM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/b2_gcomputation.html">G-computation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/b3_gestimation.html">G-estimation of structural nested models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/c1_instrumental_variable.html">Instrumental variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/c2_regression_discontinuity.html">Regression discontinuity (RD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/c3_interrupted_time.html">Interrupted time series (ITS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/c4_diff_in_diff.html">Difference in differences (DiD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../causal_methods/other.html">Other methods</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="1_predict_vs_causal.html" class="nav-link">Prediction v.s. causal inference</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Target...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="section" id="target-trial-emulation">
<h1>Target trial emulation<a class="headerlink" href="#target-trial-emulation" title="Permalink to this heading">#</a></h1>
<div class="info admonition">
<p class="admonition-title">Executive summary</p>
<p><strong>Target trial emulation</strong> involves outlining your imaginary ideal RCT, and using that to inform study design, to help prevent avoidable biases like:</p>
<ul class="simple">
<li><p><strong>Immortal time bias</strong> - when you ignore variation in timing of treatment initiation</p></li>
<li><p><strong>Lead time bias</strong> - when you detect a disease earlier than you otherwise would have in practice</p></li>
<li><p><strong>Selection bias</strong> - when people in study systematically differ from population of interest</p></li>
</ul>
<p>It also helps identify relevant causal questions and confounders.</p>
<p>To design your target trial protocol you should outline the:</p>
<ul class="simple">
<li><p>Eligibility criteria</p></li>
<li><p>Treatment strategies</p></li>
<li><p>Treatment assignment</p></li>
<li><p>Outcomes</p></li>
<li><p>Causal estimand</p></li>
<li><p>Start and end of follow-up</p></li>
<li><p>Statistical analysis</p></li>
</ul>
<p>When emulating the target trial, you should ensure that the following are aligned at <strong>time zero</strong>: eligibility criteria met, treatment strategies assigned, follow-up started.</p>
<p>There are several study designs that attempt to minimise bias in observational research. These include…</p>
<p><strong>Active comparator (AC), new user (NU) (ACNU)</strong> design</p>
<ul class="simple">
<li><p>AC: Compares between two active treatment strategies, as no treatment can mean no indication for treatment (e.g. mild) or contraindications (e.g. severe co-existing conditions) - avoiding bias from contraindications</p></li>
<li><p>NU: Follow from treatment initation, don’t include current users</p></li>
</ul>
<p><strong>Clone-censor-weight</strong> design</p>
<ul class="simple">
<li><p>Clone (each patient starts on every treatment arm) and then censor (when no longer on arm) to reduce confounding at baseline and immortal-time bias</p></li>
<li><p>This introduces informative censoring, which then adjust for by weighting (using inverse-probability weights)</p></li>
</ul>
<p><strong>Sequential trial</strong> design</p>
<ul class="simple">
<li><p>Series of artifical trials that divide at time points (e.g. study visits), and then within each trial, people are censored when their treatment deviates from what it was at the start of that artifical trial. Inverse probability weighting used to adjust for artifical censoring.</p></li>
<li><p>Can then estimate effect of sustained treatment v.s. no treatment, starting at each time point</p></li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>‘<strong>Target trial emulation</strong> is a <strong>framework</strong> for designing and analysing observational studies that aim to estimate the causal effect of interventions. For each causal question on an intervention, one can imagine the randomized trial (the “target trial”) that could have been conducted to answer that question. This target trial should be explicitly specified in a target trial protocol’. This then informs design of the observational study. <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
<p>Target trial emulation is recommended as the standard approach for causal observational studies that investigate interventions. Reasons for this include…</p>
<div class="section" id="bias">
<h3>Bias<a class="headerlink" href="#bias" title="Permalink to this heading">#</a></h3>
<p>It <strong>improves the quality of these observational studies by preventing avoidable biases</strong>. ‘ Although many practitioners worry about confounding in observational studies, the effect of these “self-inflicted” biases is often much more severe.’ <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
<p>Examples:</p>
<ul>
<li><p><strong>Immortal time bias (ITB)</strong> - ‘occurs when there is variation in timing of treatment initiation from cohort entry and time-to-treatment is misclassified or ignored’, meaning that a cohort is followed during times in which outcomes cannot occur. <a class="reference external" href="https://doi.org/10.1177%2F1073274818789355">[Agarwal et al. 2018]</a></p>
<p>Example from <a class="reference external" href="http://dx.doi.org/10.1056/NEJMc1408400#SA1">Egom 2014</a>:</p>
</li>
</ul>
<p><img alt="Immortal Time Bias example" src="../_images/immortal_time_bias.png" /></p>
<ul>
<li><p><strong>Lead time bias</strong> - ‘when a disease is detected by a screening or surveillance test at an earlier time point than it would have been if it had been diagnosed by its clinical appearance’ <a class="reference external" href="https://doi.org/10.1016/B978-0-8151-4385-7.50009-6">[Rollinson and Sabel 2007]</a></p>
<p>Example by <a class="reference external" href="https://commons.wikimedia.org/w/index.php?curid=15703636">Mcstrother - Own work, CC BY 3.0</a>:</p>
</li>
</ul>
<p><img alt="Lead time bias example" src="../_images/Lead_time_bias.svg.png" /></p>
<ul class="simple">
<li><p><strong>Selection bias</strong> - ‘occurs when individuals or groups in a study differ systematically from the population of interest leading to a systematic error in an association or outcome’ <a class="reference external" href="https://catalogofbias.org/biases/selection-bias/">[Catalogue of Bias Collaboration]</a></p></li>
</ul>
<p>A recent review of observational studies found that:</p>
<ul class="simple">
<li><p>57% of observational studies suffer from immortal time bias</p></li>
<li><p>44% suffer from depletion of susceptibles/prevalent user selection bias.’ <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p></li>
</ul>
</div>
<div class="section" id="relevant-causal-questions">
<h3>Relevant causal questions<a class="headerlink" href="#relevant-causal-questions" title="Permalink to this heading">#</a></h3>
<p>Target trial emulation ‘forces investigators to ask causal questions about interventions, leading to findings that are directly useful in decision-making’.</p>
<blockquote>
<div><p>Example: <em>‘Many observational studies have investigated the causal effect of BMI on outcomes. BMI is not an intervention; patients cannot be randomized to have a certain BMI—a certain BMI can only be achieved through a particular intervention, such as diet, physical exercise, bariatric surgery, or medications (e.g., semaglutide or tirzepatide). These observational studies thus lose the vital information on how a patient attained a different BMI level. Each of the interventions may lower BMI by the same amount but may have completely different causal effects on the outcome. Therefore, the association between BMI and outcomes becomes an amalgamation of each of these interventions, which makes the association difficult to interpret.</em>’</p>
</div></blockquote>
<p>‘The fact that the causal effect of biomarkers cannot be directly studied does not necessarily mean that the target trial emulation is restrictive—the investigator just needs to reformulate the question in terms of an intervention, just as has been performed to research biomarker targets in real randomized trials.’ <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
</div>
<div class="section" id="identify-confounders">
<h3>Identify confounders<a class="headerlink" href="#identify-confounders" title="Permalink to this heading">#</a></h3>
<blockquote>
<div><p>Example: <em>‘Suppose that an investigator is interested in estimating the causal effect of living donor kidney transplantation versus deceased donor kidney transplantation on graft and recipient survival. Which confounders should the investigator adjust for: donor characteristics, recipient characteristics, or both?</em></p>
<p><em>When donor and recipient characteristics are imbalanced, the investigator may be inclined to adjust for both in the observational analysis. Fortunately, thinking about the target trial provides the solution. In a randomized trial, the investigator randomizes recipients to a kidney transplant from a living donor or a deceased donor. Consequently, the recipients in both groups have similar characteristics. However, living donors will not have characteristics similar to deceased donors in this randomized trial. The potential lower quality of kidneys from deceased donors is part of the treatment.</em></p>
<p><em>The observational analysis should therefore only adjust for recipient characteristics to emulate this randomization and not for donor characteristics.’</em> <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
</div></blockquote>
</div>
<div class="section" id="guides-required-data-and-analysis">
<h3>Guides required data and analysis<a class="headerlink" href="#guides-required-data-and-analysis" title="Permalink to this heading">#</a></h3>
<p>‘The required data and statistical analysis logically flow from the specifications in the research question.’ <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
</div>
</div>
<div class="section" id="how-to-design-your-target-trial-protocol">
<h2>How to design your target trial protocol<a class="headerlink" href="#how-to-design-your-target-trial-protocol" title="Permalink to this heading">#</a></h2>
<p>You should include the following protocol elements. This table is adapted from <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a>. The example is ‘for an observational study aiming to estimate the causal effect of renin-angiotensin system inhibitors versus calcium channel blockers on outcomes in patients with advanced CKD’.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Protocol element</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Target Trial</p></th>
<th class="head"><p>Subsequent observational study</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Eligibility criteria</strong></p></td>
<td><p><strong>Who will be included in this study?</strong></p></td>
<td><p>- Age 18+<br>- Under nephrologist care<br>- CKD G4 (i.e., eGFR &lt;30 ml/min per 1.73 m2)<br>- No history of kidney transplantation<br>- No use of RASi or CCB in previous 180 d between January 2007 and December 2016</p></td>
<td><p>Same as target trial</p></td>
<td><p>Observational study could be tempted to include all individuals on treatment or with outcome in follow-up - but this would be incorrect, as eligibility criteria determine who is enrolled in a trial, and information from follow-up could <strong>never</strong> determine eligibility<br><br>Will often need to <strong>compromise</strong> in observational study if can’t get all data required to determine eligibility</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Treatment strategies</strong></p></td>
<td><p><strong>Which precise treatment strategies or interventions will eligible individuals receive?</strong></p></td>
<td><p>1. Initiate RASi (ACEi or ARB) only<br>2. Initiate CCB only</p></td>
<td><p>Same as target trial</p></td>
<td><p>In practice, more likely “initiate RASi only and always use during follow-up” - should capture that nauance. Important to be specific as guides follow-up and analysis, including whether need to adjust for time-varying confounding</p></td>
</tr>
<tr class="row-even"><td><p><strong>Treatment assignment</strong></p></td>
<td><p><strong>How will eligible individuals be assigned to the treatment strategies?</strong></p></td>
<td><p>Randomization, no blinding</p></td>
<td><p>Eligible individuals are assigned at baseline to the treatment strategy that their data are consistent with. To emulate randomization, we adjust for the following baseline confounders: age, sex, eGFR, systolic and diastolic blood pressure, medical history (heart failure, arrhythmia, peripheral vascular disease, cerebrovascular disease, ischemic heart disease, diabetes mellitus, hyperkalemia, AKI), medication use (β-blocker, thiazide diuretic, potassium-sparing diuretic, statin), and health care use (the total number of hospitalizations in previous year)</p></td>
<td><p>Individuals will be randomly assigned to one of the treatment strategies in the target trial<br><br>Appropriate emulation of randomization requires sufficient adjustment for all baseline confounders, which need to be measured before treatment assignment. The difficulty is to obtain enough data on confounders to remove residual confounding.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Outcomes</strong></p></td>
<td><p><strong>What outcomes will be measured during follow-up?</strong></p></td>
<td><p>1. Kidney replacement therapy (dialysis or kidney transplantation) 2. All-cause mortality 3. Major adverse cardiovascular events (composite of cardiovascular death, nonfatal myocardial infarction, nonfatal stroke)</p></td>
<td><p>Same as target trial. Kidney replacement therapy is registered in the Swedish renal registry; all-cause/cardiovascular mortality is identified from the Swedish death registry; hospitalizations for myocardial infarction or stroke are identified through ICD-10 codes in the national patient registry</p></td>
<td><p>Outcome data may often be missing<br><br>In observational data, outcomes usuallly not assessed blindly and systematically, so this can lead to bias (e.g. if you get more measurements when you’re sicker - which you can addresss by comparing number of measurements - but not by restricting to patients with certain number of measurements, since randomised trial wouldn’t have known that at baseline, and this would lead to selection bias)</p></td>
</tr>
<tr class="row-even"><td><p><strong>Causal estimand</strong></p></td>
<td><p><strong>Which causal estimand will be estimated with the observational data?</strong></p></td>
<td><p><strong>Intention-to-treat effect</strong> (analyse in randomised groups regardless of whether complete or switch treatment)<br><br><strong>Per protocol effect</strong> (only analyses people who strictly adhered to protocol - and excludes people who didn’t complete or switched treatment)</p></td>
<td><p>Per protocol effect (effect of receiving treatment strategy as specified in protocol)</p></td>
<td><p>Randomised trials are commonly effect of being randomised (intention-to-treat effect) and effect of receiving treatment as per protocol (per protocol effect). Observational studies are not randomised so you can only estimate per protocol effects, <strong>never</strong> intention-to-treat (despire investigators often using that term)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Start and end of follow-up</strong></p></td>
<td><p><strong>When does follow-up start and when does it end?</strong></p></td>
<td><p>Starts at randomization and ends at occurrence of end point, administrative censoring or 5 yr of follow-up</p></td>
<td><p>Starts at medication initiation (filled prescription) and ends at occurrence of end point, administrative censoring or 5 yr of follow-up</p></td>
<td><p>Target trial starts at randomization and finishes at reaching an end point, administrative censoring, or 5 years of follow-up<br><br>Observational starts when (1) patient eligible and (2) patient data congruent with start of treatment. There isn’t clear time for when “do not initiate” treatment begins - solution is to analyse question in sequential trials, which uses idea that patients in “do not initiate treatment” group can be allocated to strategy at any point in time when are eligible. When interested in patients who “always use during follow-up”, would need to censor (stop follow-up) when discontinue assigned treatment</p></td>
</tr>
<tr class="row-even"><td><p><strong>Statistical analysis</strong></p></td>
<td><p><strong>Which statistical analyses will be used to estimate the causal estimand?</strong></p></td>
<td><p>Intention-to-treat analysis, non-naïve per protocol analysis</p></td>
<td><p>Per protocol analysis: Hazard ratios are estimated using Cox regression while adjusting for baseline confounders with inverse probability of treatment weighting. Weighted cumulative incidence curves are estimated using the Aalen–Johansen estimatora</p></td>
<td><p>Includes methods to adjust for confounding, how missing data are dealt with, and which methods were used to obtain effect estimates</p></td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
</div>
<div class="section" id="how-to-use-this-to-inform-your-observational-study">
<h2>How to use this to inform your observational study<a class="headerlink" href="#how-to-use-this-to-inform-your-observational-study" title="Permalink to this heading">#</a></h2>
<p>‘To ensure that the target trial protocol properly emulates the design of a randomized trial, it is a key to align the following three components <strong>at time zero</strong> (often also referred to as baseline) in the observational study:</p>
<ol class="arabic simple">
<li><p>Eligibility criteria are met, that is, all included patients meet the specified inclusion and exclusion criteria.</p></li>
<li><p>Treatment strategies are assigned.</p></li>
<li><p>Follow-up is started, that is, we start counting outcomes.</p></li>
</ol>
<p>Note that these three components are naturally aligned in randomized trials at the moment of randomization.’</p>
<p>Observational study design options:</p>
<ul class="simple">
<li><p>Active comparator, new user (ACNU) design</p></li>
<li><p>Clone censor weight design</p></li>
<li><p>Sequential trial design <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p></li>
</ul>
<div class="section" id="active-comparator-new-user-acnu-design">
<h3>Active comparator, new user (ACNU) design<a class="headerlink" href="#active-comparator-new-user-acnu-design" title="Permalink to this heading">#</a></h3>
<p>Used to compare effect of initiating two treatments <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
<p>Designed to ‘emulate the intervention part of a RCT’, comparing two cohorts of drug users.</p>
<ul class="simple">
<li><p><strong>Active comparator (AC)</strong> design: restrict ‘study to individuals with an indication for treatment and without contraindications’ <a class="reference external" href="https://doi.org/10.1007%2Fs40471-015-0053-5">[Lund et al. 2015]</a></p>
<ul>
<li><p>Compares with <strong>active comparator</strong> (another drug/treatment) rather than <strong>non-active comparator</strong> (no active treatment… non-users). Patients in that group - who have disease but are not on active treatment - can include those with no indication for treatment (e.g. mild disease), or people for whom all treatment is contraindicated (e.g. if have severe co-existing conditions) - and as such, are often not included in RCTs</p></li>
<li><p>Avoids <strong>bias from contraindications</strong>: In practice, ‘physicians carefully choose who should or should not be treated with the drug of interest , causing imbalance between treatment groups in the baseline level of risk for the outcome of interest in observational studies—that is, confounding by indication’</p></li>
<li><p>‘The active-comparator design has three main advantages: increased similarity in measured patient characteristics between treatment groups; reduced potential for unmeasured confounding; and possibly improving the clinical relevance of the research question’ <a class="reference external" href="https://doi.org/10.1038/nrrheum.2015.30">[Yoshida et al. 2015]</a></p></li>
</ul>
</li>
<li><p><strong>New user (NU)</strong> design: align ‘individuals at a uniform point in time to start follow-up (i.e., treatment initiation) and ensuring the correct temporality between covariate and exposure assessment’ <a class="reference external" href="https://doi.org/10.1007%2Fs40471-015-0053-5">[Lund et al. 2015]</a></p>
<ul>
<li><p>Also known as incident-user design or initator design</p></li>
<li><p>This ‘includes a cohort of patients initiating treatment with a drug of interest who are followed up from treatment initiation, similar to RCTs. By contrast, the prevalent-user design includes both current and new users of a drug of interest within the study period, and follow-up thus starts at a different time point in the course of each individual’s treatment’</p></li>
<li><p>‘The new-user design has three main advantages: time-varying hazards and drug effects associated with treatment duration can be assessed; appropriate adjustment for confounding is ensured by capturing pretreatment variables; and potential for immortal time bias is reduced when this design is combined with the active-comparator design’ <a class="reference external" href="https://doi.org/10.1038/nrrheum.2015.30">[Yoshida et al. 2015]</a></p></li>
</ul>
</li>
</ul>
<p>Illustration of ACNU and confounding by indication from <a class="reference external" href="https://doi.org/10.1002/pds.5407">Sendor and Stürmer 2022</a>:
<img alt="Confounding by indication and ACNU" src="../_images/confounding_by_indication.jpg" /></p>
</div>
<div class="section" id="clone-censor-weight-design">
<h3>Clone-censor-weight design<a class="headerlink" href="#clone-censor-weight-design" title="Permalink to this heading">#</a></h3>
<p>Useful for grace periods, treatment duration, or when treatment is started based on a biomarker level <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
<p>The approach involves three steps:</p>
<ol class="arabic simple">
<li><p>‘<strong>”Clone”</strong> each patient once for each treatment regimen of interest.’ <a class="reference external" href="https://www.targetrwe.com/news-events/one-model-to-rule-them-all-using-a-single-model-to-control-for-confounding-and-informative-censoring/">[source]</a></p>
<ul class="simple">
<li><p>‘Cloning patients allows us to assign patients to both arms for the duration for which treatment allocation is unknown. At baseline, in our illustration, we assumed that all patients were equally likely to be offered surgery or not. As such, all patients entered both arms of the trial, independently of their subsequent surgery status. Thus, we created two clones of each patient with one clone allocated to each study arm, hence doubling the size of our dataset. The study arms are therefore identical with respect to demographics and clinical characteristics at the time of diagnosis. This removes confounding bias, at baseline only.’ <a class="reference external" href="https://doi.org/10.1093%2Fije%2Fdyaa057">[Maring et al. 2020]</a></p></li>
</ul>
</li>
<li><p>‘<strong>”Censor”</strong> each clone when their person-time is no longer consistent with the corresponding treatment regimen.’ <a class="reference external" href="https://www.targetrwe.com/news-events/one-model-to-rule-them-all-using-a-single-model-to-control-for-confounding-and-informative-censoring/">[source]</a></p></li>
<li><p>‘<strong>”Weight”</strong> the remaining person-time by the inverse probability of being censored.’ <a class="reference external" href="https://www.targetrwe.com/news-events/one-model-to-rule-them-all-using-a-single-model-to-control-for-confounding-and-informative-censoring/">[source]</a></p>
<ul class="simple">
<li><p>‘If the decision to perform surgery was completely random or made based on patients’ characteristics that were not associated with the outcome, the artificial censoring done… would be ignorable, and would not bias the results. However, in most observational studies, treatment decision is based on characteristics also associated with the outcome, i.e. the confounders. In our example, the decision to perform surgery is associated with age, performance status and comorbidity index, which are also associated with survival. In such situations, the artificial censoring introduces selection bias… The proposed approach to address this problem is to use inverse-probability-of-censoring weighting (IPCW)’ <a class="reference external" href="https://doi.org/10.1093%2Fije%2Fdyaa057">[Maring et al. 2020]</a></p></li>
</ul>
</li>
</ol>
<p>Explanation of how this addresses bias: ‘When the start of follow-up and the time of treatment initiation do not coincide i.e. when the exposure (or treatment) status is not defined at the inclusion within the study, immortal-time bias is a concern if the study groups are defined based on the observed treatment allocation. Indeed, treatment receipt at a given time t is conditional on having survived up to time t, and consequently, treatment receipt is more likely to be observed among patients with longer survival. We illustrated how cloning patients at the start of follow-up, carefully defining the survival time and vital status for each clone, and choosing the length of the grace period, as proposed by Hernàn et al.,9,10 can address both confounding and immortal-time biases. However, by cloning and censoring the patients to account for confounding at baseline and immortal-time bias, we introduce an informative censoring, which does not exist in the original dataset. This artificial censoring can be adjusted for by inverse-probability weights in the statistical analysis, which is the main complexity of this approach’ <a class="reference external" href="https://doi.org/10.1093%2Fije%2Fdyaa057">[Maring et al. 2020]</a></p>
<p>Illustration of design from <a class="reference external" href="https://doi.org/10.1093%2Fije%2Fdyaa057">Maring et al. 2020</a>:</p>
<p><img alt="Clone-censor-weight design" src="../_images/clone_censor_weight.jpg" /></p>
</div>
<div class="section" id="sequential-trial-design">
<h3>Sequential trial design<a class="headerlink" href="#sequential-trial-design" title="Permalink to this heading">#</a></h3>
<p>Appropriate when one group starts with treatment and other does not <a class="reference external" href="https://doi.org/10.1681/ASN.0000000000000152">[Fu 2023]</a></p>
<p>This design was first described by Hernan et al. in 2008 and Gran et al. in 2010. It ‘was originally proposed as a simple way of making efficient use of longitudinal observational data, as it enables use of a larger sample size than if an artificial trial were formed from a single time origin’. However, it is also an approach that can be used as an alternative to inverse probability weighted estimation of marginal structural models (MSM-IPTW)</p>
<p>In this design:</p>
<ul class="simple">
<li><p>Artifical “trials” are created from a sequence of new time origins (e.g. ‘study visits at which new information recorded for each individual who remains under observation’).</p></li>
<li><p>‘At each time origin individuals are divided into those who have just initiated the treatment under investigation and those who have not yet initiated the treatment.’</p></li>
<li><p>‘Within each trial, individuals are artificially censored at the time at which their treatment status deviates from what it was at the time origin, if such deviation occurs.’</p></li>
<li><p>‘Inverse probability of censoring weighting is used to account for dependence of this artificial censoring on time-dependent characteristics’</p></li>
<li><p>‘ The overall effects of sustained treatment versus no treatment, starting from each time origin, can then be estimated using, for example, weighted pooled logistic or Cox regression’ <a class="reference external" href="https://doi.org/10.1002%2Fsim.9718">[Keogh 2023]</a></p></li>
</ul>
</div>
</div>
</div>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="6_propensity_scores.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Propensity scores</p>
      </div>
    </a>
    <a class="right-next"
       href="../causal_methods/summary.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Overview</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bias">Bias</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relevant-causal-questions">Relevant causal questions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identify-confounders">Identify confounders</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#guides-required-data-and-analysis">Guides required data and analysis</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-design-your-target-trial-protocol">How to design your target trial protocol</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use-this-to-inform-your-observational-study">How to use this to inform your observational study</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#active-comparator-new-user-acnu-design">Active comparator, new user (ACNU) design</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-censor-weight-design">Clone-censor-weight design</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sequential-trial-design">Sequential trial design</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/causal_concepts/7_target_trial.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, Amy Heather.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>